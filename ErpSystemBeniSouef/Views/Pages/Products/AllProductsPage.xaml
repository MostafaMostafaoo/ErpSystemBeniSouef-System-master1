<Page x:Class="ErpSystemBeniSouef.Views.Pages.Products.AllProductsPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
      xmlns:local="clr-namespace:ErpSystemBeniSouef.Views.Pages.Products"
      xmlns:userControls="clr-namespace:ErpSystemBeniSouef.Views.UserControls"
      mc:Ignorable="d" 
      d:DesignHeight="950" d:DesignWidth="1000"
      
      Title="AllProductsPage">

    <Page.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="../../../Styles/ButtonStyles.xaml"/>
                <ResourceDictionary Source="../../../Styles/TextBoxStyles.xaml"/>
                <ResourceDictionary Source="../../../Styles/TextBlockStyles.xaml"/>
                <ResourceDictionary Source="../../../Styles/TableStyles.xaml"/>
                <ResourceDictionary Source="../../../Styles/BorderStyles.xaml"/>

                <ResourceDictionary Source="../../../Styles/ComboBoxStyles.xaml"/>
            </ResourceDictionary.MergedDictionaries>
            <FontFamily x:Key="MainFont">pack://application:,,,/Assets/#Roboto</FontFamily>
            <BooleanToVisibilityConverter x:Key="BoolToVis" />
            <BooleanToVisibilityConverter x:Key="StringIsNullOrEmptyToVisibilityConverter" />
        </ResourceDictionary>
    </Page.Resources>


    <Grid Margin="20">

        <Grid.RowDefinitions>
            <RowDefinition Height=".7*"/>
            <RowDefinition Height="2.2*"/>
            <!-- المدخلات -->
            <RowDefinition Height="1.1*"/>
            <!-- الأزرار -->
            <RowDefinition Height="5.5*"/>
            <RowDefinition Height=".9*"/>
            <!-- الجدول -->
        </Grid.RowDefinitions>
        <userControls:TitleBar/>


        <!-- قسم المدخلات -->
        <Grid Grid.Row="1" Margin="10,0,0,0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="0.7*"/>
                <ColumnDefinition Width="0.9*"/>
                <ColumnDefinition Width="1.4*"/>
            </Grid.ColumnDefinitions>

            <!-- العمود الأيمن -->
            <StackPanel Grid.Column="2" HorizontalAlignment="Right" Orientation="Vertical" Margin="5">
                <StackPanel Orientation="Horizontal" Margin="0 0 0 5">
                    <TextBox x:Name="ProductName" FlowDirection="RightToLeft"
                             Style="{StaticResource textboxx}"
                               Width="180" Height="32"/>
                    <TextBlock Text="  : اسم الصنف"  Foreground="White" FontSize="21" Width="140"/>
                </StackPanel>
                <StackPanel Orientation="Horizontal" Margin="0 5 0 10">
                    <ComboBox x:Name="cb_type"   DisplayMemberPath="Name"
                              SelectedValuePath="Id" Width="170"
                              Style="{StaticResource SmallerComboBox}"  />
                    <TextBlock Text="  : نوع المنتج "  Foreground="White" FontSize="21" Width="130"/>
                </StackPanel>

                <StackPanel Orientation="Horizontal">
                    <TextBox x:Name="RepresentivePercentage"
                             FlowDirection="RightToLeft" Height="28"
                             Style="{StaticResource textboxx}" Width="140" />
                    <TextBlock  Text=" : نسبة المندوب" Foreground="White" FontSize="20" Width="150"/>
                </StackPanel>
            </StackPanel>

            <!-- العمود الأيسر -->
            <StackPanel Grid.Column="1" HorizontalAlignment="Right" Orientation="Vertical" Margin="5">
                <StackPanel Orientation="Horizontal" Margin="0 0 0 10">
                    <TextBox x:Name="mainPrice" FontSize="23" Height="28" Width="180"
                             FlowDirection="RightToLeft" Style="{StaticResource textboxx}" />
                    <TextBlock  FlowDirection="RightToLeft"  Text="  سعر الشراء الأساسي :"
                                Foreground="White" FontSize="21" Width="210"/>
                </StackPanel>
                <StackPanel Orientation="Horizontal">
                    <TextBox x:Name="SalePrice" FlowDirection="RightToLeft" 
                             FontSize="23" Height="28"  Width="180"
                             Style="{StaticResource textboxx}" />
                    <TextBlock FlowDirection="RightToLeft" 
                               Text="  سعر البيع الأساسي :" 
                               Foreground="White" FontSize="21" Width="210"/>
                </StackPanel>
                
                
            </StackPanel>
            <!-- العمود الأيسر -->
            <StackPanel Grid.Column="0" VerticalAlignment="Bottom" Orientation="Horizontal" Margin="5">
 
                <TextBox x:Name="SearchByItemTextBox"  FlowDirection="RightToLeft"
Width="180"
Height="28" Margin="0 0 0 0"  ToolTip="ادخل اسم المنتج  " 
Style="{StaticResource textboxx}"                    
VerticalAlignment="Center"
HorizontalAlignment="Center"
TextChanged="SearchByItemFullNameBox_TextChanged"
/>
              
                <Popup x:Name="SuggestionsPopup"
Placement="Bottom"
PlacementTarget="{Binding ElementName = SearchByItemTextBox}"
StaysOpen="False"
Width="100"
Height="auto">
                    <ListBox x:Name="SuggestionsItemsListBox" 
      SelectionChanged="SuggestionsItemsListBoxForText_SelectionChanged"
        Background="#012E29" Foreground="White"
      SelectionMode="Multiple"
      />
                </Popup>
                <Label Margin="0,10,10,10" Content="  : بحث  " 
                 HorizontalAlignment="Right" Foreground="White" Height="35"
FontSize="24"  Style="{StaticResource LabelStyle}"></Label>

            </StackPanel>

        </Grid>

        <!-- الأزرار -->
        <StackPanel  Grid.Row="2" Background="#1B7F" Margin="40 0 0 0" Orientation="Horizontal" HorizontalAlignment="Center">

            <Button x:Name="editBtn" Visibility="Hidden" Style="{StaticResource UpdateBtn}"
Content="تعديل" Margin="10" Click="BtnEdit_Click"/>
            
            <Button Content="حذف" Width="140"     Style="{DynamicResource DeleteButtonn}" Margin="10"     Click="DeleteButton_Click_1" />
            <Button Content="إضافة" Width="140"   Style="{DynamicResource AddButtonn}"     Margin="15,10" Click="AddButton_Click" />

        </StackPanel>

        <!-- قسم الجدول -->
        <DataGrid 
         Grid.Row="3"
         x:Name="AllProductsDataGrid"
         AutoGenerateColumns="False"
         CanUserAddRows="False" 
         IsReadOnly="False" 
         ScrollViewer.VerticalScrollBarVisibility="Auto"
         ScrollViewer.HorizontalScrollBarVisibility="Auto"
         FontSize="20"
         RowHeight="30"
         Background="#1B7F"
         HeadersVisibility="Column"
          SelectionChanged="dgAllProducts_SelectionChanged"  > 
            <DataGrid.Columns>
                  <DataGridTextColumn Binding="{Binding SalePrice}" Header=" جملة " Width="0.7*">

                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                             <Setter Property="TextAlignment" Value="Center"/> 
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                    <DataGridTextColumn.HeaderStyle>
                        <Style TargetType="DataGridColumnHeader">
                            <Setter Property="HorizontalContentAlignment" Value="Center"/>
                            <Setter Property="FontSize" Value="23"/>
                        </Style>
                    </DataGridTextColumn.HeaderStyle>

                </DataGridTextColumn>
                
                <DataGridTextColumn Binding="{Binding PurchasePrice}" Header="قطاعي" Width="0.7*">

                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Setter Property="TextAlignment" Value="Center"/>
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                    <DataGridTextColumn.HeaderStyle>
                        <Style TargetType="DataGridColumnHeader">
                            <Setter Property="HorizontalContentAlignment" Value="Center"/>
                            <Setter Property="FontSize" Value="24"/>
                        </Style>
                    </DataGridTextColumn.HeaderStyle>

                </DataGridTextColumn>

                <DataGridTextColumn Binding="{Binding CommissionRate}" Header="النسبة " Width="0.7*" >

                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Setter Property="TextAlignment" Value="Center"/>
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                    <DataGridTextColumn.HeaderStyle>
                        <Style TargetType="DataGridColumnHeader">
                            <Setter Property="HorizontalContentAlignment" Value="Center"/>
                            <Setter Property="FontSize" Value="24"/>
                        </Style>
                    </DataGridTextColumn.HeaderStyle>

                </DataGridTextColumn>

                <DataGridTextColumn Binding="{Binding Category.Name}" Header=" النوع (م.رئيسية) ء." Width="1.0*" >

                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Setter Property="TextAlignment" Value="Center"/>
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                    <DataGridTextColumn.HeaderStyle>
                        <Style TargetType="DataGridColumnHeader">
                            <Setter Property="HorizontalContentAlignment" Value="Center"/>
                            <Setter Property="FontSize" Value="24"/>
                        </Style>
                    </DataGridTextColumn.HeaderStyle>

                </DataGridTextColumn>

                <DataGridTextColumn Binding="{Binding ProductName}" Header="اسم الصنف" Width="1.3*" >

                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Setter Property="TextAlignment" Value="Center"/>
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                    <DataGridTextColumn.HeaderStyle>
                        <Style TargetType="DataGridColumnHeader">
                            <Setter Property="HorizontalContentAlignment" Value="Center"/>
                            <Setter Property="FontSize" Value="24"/>
                        </Style>
                    </DataGridTextColumn.HeaderStyle>

                </DataGridTextColumn>

                <DataGridTextColumn Binding="{Binding Id}" Header="كود الصنف" Width=".5*" >

                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Setter Property="TextAlignment" Value="Center"/>
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                    <DataGridTextColumn.HeaderStyle>
                        <Style TargetType="DataGridColumnHeader">
                            <Setter Property="HorizontalContentAlignment" Value="Center"/>
                            <Setter Property="FontSize" Value="24"/>
                        </Style>
                    </DataGridTextColumn.HeaderStyle>

                </DataGridTextColumn>

            </DataGrid.Columns>

        </DataGrid>

        <!--<Button Grid.Row="4" HorizontalAlignment="Left"   CommandParameter="DashBoardDoctor" 
         Content="↩" FontSize="22" Style="{StaticResource triggerrr}"
         Margin="21,10,0,1"  
         Click="BackBtn_Click"/>-->

        <Button Grid.Row="4" HorizontalAlignment="Left"  Content="↩" FontSize="35" 
         Width="150" Height="55" Foreground="White"
         Style="{StaticResource triggerrr}" Margin="31,0,0,1"  
         Click="BackBtn_Click"/>

    </Grid>


</Page>
